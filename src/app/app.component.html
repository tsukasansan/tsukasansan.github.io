<div class="app-body" (window:keydown)="onKey($event)">

    <app-loading [hidden]="isWeb3Connected"
                 [retryConnect]="retryConnect"></app-loading>

    <div [ngClass]="{'is-loaded': isWeb3Connected}"
         class="app-content">

        <header>
            <h1 class="logo-pic">
                E-LOTHERY <i>alpha</i>
            </h1>
            <div>
                <button>how to play</button>
            </div>
        </header>

        <div class="container">

            <div class="container__label">
                <h1>
                    Try your luck with<br>
                    blockchain lottery
                </h1>
            </div>

            <div class="container--flex">
                <section class="lottery-list" [ngClass]="{'is-play': isPlay}">

                    <a (click)="refreshList()"
                       class="lottery-list__refresh">refresh list</a>

                    <ul [ngClass]="{'is-loaded': !isLoading}">
                        <li *ngFor="let contract of contracts; let _index = index"
                            id="{{contract.address}}">
                            <a [ngClass]="{'is-closed': !contract.contractData?.open}"
                               (click)="play(contract.contractData?.address, _index)">

                                <h1>
                                    <span [innerHtml]="(contract.contractData?.jackpot - (contract.contractData?.jackpot*(contract.contractData?.ownerFee/100)))/1000000000000000000"></span>
                                    eth
                                </h1>
                                <img src="assets/images/icons/icon_{{_index}}.gif">
                                <p><span [innerHtml]="contract.contractData?.total/1000000000000000000"></span>
                                    /
                                    <span [innerHtml]="contract.contractData?.jackpot/1000000000000000000"></span>
                                </p>
                                <p>fee <span [innerHtml]="contract.contractData?.fee/1000000000000000000"></span>
                                </p>
                                <span [innerHtml]="contract.contractData?.result"></span>
                            </a>
                        </li>
                    </ul>
                </section>

                <aside class="sidebar">
                    <h2 class="sidebar__title">My bets</h2>

                    <ul class="bets">
                        <h3 *ngIf="!bets?.length">
                            No Bets yet, go make your first!
                        </h3>

                        <li *ngFor="let bet of bets">
                            <img src="/assets/images/icons/icon_{{bet.index}}.gif">
                            {{bet.bet}}<br>
                            {{bet.timestamp | date: "HH:mm:s d/MMM/yy"}}<br>
                            {{bet.isConfirmed}}
                        </li>
                    </ul>
                    <!--<button (click)="withdraw()">withdraw</button>-->
                </aside>

                <div [ngClass]="{'is-play':isPlay}"
                     class="play">
                    <div [hidden]="!isPlay">
                        <span class="play__close" (click)="closePlay()">x</span>
                        <app-play [play]="playContractObject"></app-play>
                    </div>
                </div>

            </div>
        </div>
    </div>

</div>


<!--<button (click)="getAccounts()">bet contracts</button>-->
